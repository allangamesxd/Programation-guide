# Ticket AvanÃ§ado

Comando:

const Discord = require("discord.js")

module.exports = {
    name: "t", // Coloque o nome do comando do arquivo
    aliases: ["ticket"], // Coloque sinÃ´nimos aqui

    run: async(client, message, args) => {

        if (!message.member.permissions.has("ADMINISTRATOR")) {
            message.reply(`VocÃª nÃ£o possui permissÃ£o para utilizar este comando.`)
        } else {
            let embed = new Discord.MessageEmbed()
            .setColor("RANDOM")
            .setAuthor({ name: message.guild.name, iconURL: message.guild.iconURL({ dynamic: true }) })
            .setFooter({ text: message.guild.name, iconURL: message.guild.iconURL({ dynamic: true }) })
            .setTimestamp(new Date())
            .setDescription(`Abra um ticket selecionando o botÃ£o abaixo: \`ðŸŽ«\`\nCaso nÃ£o tenhha um motivo especÃ­fico, nÃ£o abra um ticket.`);

            let botao = new Discord.MessageActionRow()
            .addComponents(
                new Discord.MessageButton()
                .setCustomId("t")
                .setEmoji("ðŸŽ«")
                .setStyle("SECONDARY")
            );

            message.channel.send({ embeds: [embed], components: [botao] }).then( () => {
                message.delete()
            });
        }

       
        
    }
}


Index:

client.on("interactionCreate", (interaction) => {

    if (interaction.isButton()) {

        if (interaction.customId === "t") {
            if (interaction.guild.channels.cache.find(c => c.name === `ðŸŽ«-${interaction.user.id}`)) {
                let c = interaction.guild.channels.cache.find(c => c.name === `ðŸŽ«-${interaction.user.id}`);
                interaction.reply({ content: `VocÃª jÃ¡ possui um ticket aberto em ${c}.`, ephemeral: true })
            } else {
                interaction.guild.channels.create(`ðŸŽ«-${interaction.user.id}`, {
                    type: "GUILD_TEXT",
                    //parent: "",
                    permissionOverwrites: [
                        {
                            id: interaction.guild.id,
                            deny: ["VIEW_CHANNEL"]
                        },
                        {
                            id: interaction.user.id,
                            allow: ["VIEW_CHANNEL", "SEND_MESSAGES", "ATTACH_FILES", "ADD_REACTIONS"]
                        }
                    ]
                }).then(c => {

                    interaction.reply({ content: `OlÃ¡, seu ticket foi aberto em ${c}.`, ephemeral: true })

                    let embed = new Discord.MessageEmbed()
                    .setAuthor({ name: interaction.guild.name, iconURL: interaction.guild.iconURL({ dynamic: true }) })
                    .setDescription(`OlÃ¡ \`${interaction.user.username}\`, boas vindas ao seu ticket.\nAgurade alguns instantes para receber o suporte.\n\nFeche seu ticket com \`ðŸ”’\`.`);

                    let botao = new Discord.MessageActionRow()
                    .addComponents(
                        new Discord.MessageButton()
                        .setCustomId("tf")
                        .setEmoji("ðŸ”’")
                        .setStyle("SECONDARY")
                    );

                    c.send({ embeds: [embed], components: [botao] }).then(msg => msg.pin())
                })
            }
        } else if (interaction.customId === "tf") {
            interaction.reply(`\\ðŸ”’ OlÃ¡ ${interaction.user}, este ticket serÃ¡ fechado em \`5 segundos\`...`).then(() => {
                setTimeout(() => {
                    interaction.channel.delete();
                }, 5000)
            })
        }
    }
});
